<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>lib/utility.js - Abstract</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="http://a3d72a45d111006ec192-ec5b80a12b0b09b4d52373336afb4254.r80.cf1.rackcdn.com/usability-dynamics.png" title="Abstract"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Abstract.html">Abstract</a></li>
            
                <li><a href="../classes/ObjectExtender.html">ObjectExtender</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: lib/utility.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * Helper Utility for Abstract
 *
 * @author potanin@UD
 * @date 6/17/13
 */
var Utility = Object.defineProperties( module.exports, {
  noop: {
    /**
     * Not a function, that&#x27;s for sure.
     * This method does not accept any arguments.
     */
    value: function noop() {},
    configurable: false,
    enumerable: true,
    writable: true
  },
  apply: {
    /**
     * Creates a continuation function with some arguments already applied.
     *
     * @uses async
     */
    value: require( &#x27;async&#x27; ).apply,
    configurable: true,
    enumerable: true,
    writable: true
  },
  defaults: {
    /**
     * Configure Defaults for an Object
     *
     * @returns {Object}
     */
    value: function defaults( target, defaults ) {

      // If no arguments, return empty object
      if( !target &amp;&amp; !defaults ) {
        return {};
      }

      // Ensure target is an object
      target = Object.keys( target || {} ).length ? target : {};

      // Lodash-it
      return require( &#x27;lodash&#x27; ).defaults.apply( {}, arguments );

    },
    configurable: true,
    enumerable: true,
    writable: true
  },
  watch: {
    /**
     * Watch a Single Property
     *
     * @param {Object} prop
     * @param {callback} handler
     *
     * @method watch
     * @for ObjectExtender
     *
     * @chainable
     *
     * @return {Object} newval
     */
    value: function watch( prop, handler ) {
      var oldval = this[prop];
      var newval = oldval;
      var description = Object.getOwnPropertyDescriptor( this, prop );

      // Delete original property and replace with getter/setter if possible
      if( description.configurable === false || !( delete this[ prop ] ) ) {
        return this;
      }

      return Object.defineProperty( this, prop, {
        get: function get() {
          return newval;
        },
        set: function set( val ) {
          oldval = newval;
          return newval = handler.call( this, prop, oldval, val );
        },
        enumerable: description.enumerable,
        configurable: true
      });

    },
    configurable: true,
    enumerable: true,
    writable: true
  },
  unwatch: {
    /**
     * Unwatch a Single Property
     *
     * @param {Object} prop
     *
     * @method unwatch
     * @for ObjectExtender
     *
     * @return null
     */
    value: function unwatch( prop ) {
      var val = this[prop];
      var description = Object.getOwnPropertyDescriptor( this, prop );

      // Shouldn&#x27;t happen, but just in case.
      if( description.configurable === false || !( delete this[ prop ] ) ) {
        return this;
      }

      this[prop] = val;

      return this;

    },
    configurable: true,
    enumerable: true,
    writable: true
  },
  extend: {
    /**
     * Deep Merge Another Object into Current
     *
     * Can do it in two ways:
     * - with help of _.extend(). if exists
     * - or this.deepExtend, otherwise.
     *
     * @param {Object} arguments*
     *
     * @method extend
     * @for ObjectExtender
     *
     * @uses _.extend()
     * @uses Object.deepExtend()
     *
     * @chainable
     *
     * @return {Object}
     */
    value: function extend( destination, source ) {

      for (var property in source) {
        if (source[property] &amp;&amp; source[property].constructor &amp;&amp;
          source[property].constructor === Object) {
          destination[property] = destination[property] || {};
          arguments.callee(destination[property], source[property]);
        } else {
          destination[property] = source[property];
        }
      }

      return destination;

    },
    configurable: true,
    enumerable: true,
    writable: true
  },
  query: {
    /**
     * Get property value using a dot notation path.
     *
     * @param obj
     * @param str
     * @returns {*}
     */
    value: function query( obj, str ) {

      if( !str ) {
        return obj;
      }

      if( &#x27;object&#x27; === typeof str ) {
        // @todo Convert Object to dot notation, using the first full dot notation path.
      }

      try {
        return str.split( &#x27;.&#x27; ).reduce( function( o, x ) {
          return o[x]
        }, obj);

      } catch( error ) {
        return null;
      }

    },
    configurable: true,
    enumerable: true,
    writable: true
  },
  unwrap: {
    /**
     * Unwrap dot notation string to nested Object
     *
     * @param string
     * @param value
     * @param hash
     * @param seperator
     * @return {*}
     */
    value: function unwrap( string, value, hash, seperator ) {
      if( hash == null ) { hash = {}; }
      if( seperator == null ) { seperator = &#x27;.&#x27;; }
      var parts = string.split( seperator );
      var refHash = hash;
      var depth = 0;

      parts.forEach( function( part ) {
        if( depth == parts.length - 1 ) {
          refHash[part] = value;
        } else {
          if( refHash[part] == null ) { refHash[part] = {}; }
          refHash = refHash[part];
        }

        depth++;

      });

      return hash;

    },
    configurable: true,
    enumerable: true,
    writable: true
  },
  inherit: {
    /**
     * Carefully Inherit Properties
     *
     * @param target {Object} Object to add properties to.
     * @param target {Object} Source object.
     * @returns {Object} Extended target.
     */
    value: function inherit( target, source ) {
      target = target || {};
      source = source || {};

      //if( target instanceof source ) {}

      Object.getOwnPropertyNames( source ).forEach( function( key ) {
        if( !target.hasOwnProperty( key ) ) { Object.defineProperty( target, key, Object.getOwnPropertyDescriptor( source, key ) ); }
      });

      return target;

    },
    enumerable: true
  },
  flatten: {
    /**
     * Flatten Array
     *
     */
    value: function flatten( data, options ) {
      data = data || [];
      options = options || { delimiter: &#x27;.&#x27; };
      var result = [];

      // Flatten Channel Name with Delimiter
      if( data instanceof Array ) {
        data.forEach( function( value ) {
          if( &#x27;string&#x27; === typeof value || &#x27;number&#x27; === typeof value ) {
            result.push( value );
          }
        });
      }

      result = result.join( options.delimiter );

      // Lowercase
      return result.toLowerCase()

    },
    enumerable: true
  },
  inherit_full: {
    /**
     * Inherit the prototype methods from one constructor into another.
     *
     * Copy of the Node.js util.inherits method.
     *
     * @param {function} target Constructor function which needs to inherit the prototype.
     * @param {function} constructor Constructor function to inherit prototype from.
     */
    value: function inherit_prototype( target, constructor ) {

      target.super_ = constructor;

      target.prototype = Object.create( constructor.prototype, {
        constructor: {
          value: constructor,
          enumerable: false,
          writable: true,
          configurable: true
        }
      });

    },
    configurable: true,
    enumerable: true,
    writable: true
  },
  get_constructors: {
    /**
     * Walk up the prototype chain, creating a JSON-Schema-esque structure
     *
     * @param context {Object} The object to walk through.
     * @return {Object} JSON Schema-esque constructor chain.
     */
    value: function get_constructors( context, options ) {
      context = context || {};
      options = options || {};

      var matches = {};
      var path = [];

      do {

        path.push( context.constructor.name );

        Object.defineProperty( matches, context.constructor.name, {
          enumerable: true,
          writable: true,
          value: {
            name: context.constructor.name,
            properties: {
              constructor: {
                type: typeof context.constructor,
                properties: Object.getOwnPropertyNames( context.constructor )
              },
              prototype: {
                type: typeof context.constructor.prototype,
                properties: Object.keys( context.constructor.prototype )
              }
            }
          }
        });

      } while ( context = Object.getPrototypeOf( context ) );


      if( options.format === &#x27;schema&#x27; ) {
        return matches || {};
      }

      if( options.delimiter ) {
        return path.join( options.delimiter );;
      }

    },
    configurable: true,
    enumerable: true,
    writable: true
  },
  console_json: {
    /**
     * Prety Print complex objects
     *
     * @param data
     * @param depth
     *
     * @requires lodash
     * @method console_json
     * @return {Object} The first argument.
     */
    value: function console_json( data, depth ) {

      try {

        if( &#x27;string&#x27; === typeof data &amp;&amp; ( &#x27;object&#x27; === typeof depth || &#x27;function&#x27; === typeof depth ) ) {
          console.log( &quot;\n&quot; + &#x27;===============&#x27; + data + &#x27; Properties===============&#x27; );
          data = depth;
          depth = arguments[2] || 1
        }

        var output = require( &#x27;util&#x27; ).inspect( data, false, &#x27;number&#x27; === typeof depth ? ( depth - 1 ) : 1, true );

        console.log( output );

      } catch( error ) { console.error( &#x27;Error with console.json()&#x27;, error ); }

      return arguments[0];

    },
    configurable: true,
    enumerable: true,
    writable: true
  },
  console_methods: {
    /**
     * Pretty Print and Object&#x27;s Methods
     *
     * @param data
     * @param object
     *
     * @requires lodash
     * @method console_methods
     * @return {Object} The first argument.
     */
    value: function console_methods( data, object ) {

      try {

        if( &#x27;string&#x27; === typeof data &amp;&amp; ( &#x27;object&#x27; === typeof object || &#x27;function&#x27; === typeof object ) ) {
          console.log( &quot;\n&quot; + &#x27;===============&#x27; + data + &#x27; Methods===============&#x27; );
          data = object;
        }

        module.exports.json( _.methods( data ) );

      } catch( error ) { console.error( &#x27;Error with console.methods()&#x27;, error ); }

      return arguments[0];

    },
    configurable: true,
    enumerable: true,
    writable: true
  },
  generate_hash: {
    /**
     * Generate a unique hash for an Object, using md5 on default.
     *
     * @example
     *
     *    var _hash = Utility.generate_hash({ type: &#x27;some_object&#x27;, name: &#x27;Bob&#x27;});
     *
     *    console.log( _hash ); // -&gt; 147ce3e2ccb7db6b928b303ce42bdafa
     *
     * @param obj {Object} Object to generate a hash for.
     * @param options {Object} options for hash generation.
     * @param options {String} options.type Type of hash to generate, defaulting to md5.
     * @param options {String} options.silent_fail Do not throw errors, return empty string if there was an error when true.
     *
     */
    value: function generate_hash( obj ) {

      var result;
      var string = JSON.stringify( arguments[0] || {} );
      var options = Utility.defaults( arguments[1], {
        type: &#x27;md5&#x27;,
        silent_fail: true
      });

      try {
        result = require( &#x27;crypto&#x27; ).createHash( options.type.toLowerCase() ).update( string ).digest( &#x27;hex&#x27; );
      } catch ( error ) {
        result = options.silent_fail ? &#x27;&#x27; : error;
      }

      return result;

    },
    configurable: true,
    enumerable: true,
    writable: true
  },
  methods: { value: require( &#x27;lodash&#x27; ).methods },
  values: { value: require( &#x27;lodash&#x27; ).values },
  each: { value: require( &#x27;lodash&#x27; ).each },
  toArray: { value: require( &#x27;lodash&#x27; ).toArray },
  extend: { value: require( &#x27;lodash&#x27; ).extend },
  where: { value: require( &#x27;lodash&#x27; ).where },
  if: {
    value: {
      &quot;PlainObject&quot;: require( &#x27;lodash&#x27; ).isPlainObject,
      &quot;Function&quot;: require( &#x27;lodash&#x27; ).isFunction,
      &quot;Object&quot;: require( &#x27;lodash&#x27; ).isObject,
      &quot;String&quot;: require( &#x27;lodash&#x27; ).isString,
    },
    enumerable: true
  },
  log: {
    /**
     * Output variables to console log.
     *
     * Settings can be configured like so:
     *    abstract.log.config.depth = 2;
     *    abstract.log.config.colors = true;
     *
     * @param {Object|String} data A config object
     * @example
     *      Abstract.log( data )
     *
     * method log
     * @return {Object} Abstract constructor.
     * @chainable
     */
    value: Object.defineProperties( function() {

      var output = {};

      // Capture Event Name
      if( this.event ) {
        output.event = this.event;
      }

      Utility.each( arguments, function( item, key ) {

        if( Utility.if.PlainObject( item ) ) {}

        output[ &#x27;format&#x27; ] = typeof item;

        if( key === 0 ) {
          output[ &#x27;data&#x27; ] = item;
        } else {
          output[ key ] = item;
        }

      });

      console.log( require( &#x27;util&#x27; ).inspect( output, ( Utility ).log.config ) );

      return this;
    }, { &quot;config&quot;: { value: { &quot;showHidden&quot;: true, &quot;depth&quot;: 2, &quot;colors&quot;: true }, &quot;writable&quot;: true } }),
    enumerable: true
  }
});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
